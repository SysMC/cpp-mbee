В данном примере микроконтроллер MSP430 выполняет роль пульта беспроводной системы управления освещением.
Пульт может осуществлять дистанционное управление двумя типами нагрузки - дискретной (включено/выключено) и аналоговой с плавной регулировкой с помощью ШИМ-выхода. 
Для организации беспроводной сети применяются радиомодули MBee-868-x.0, работающие под управлением программного обеспечения SerialStar.
Необходимые аппаратные средства:
1. Радиомодули MBee-868-2.0 или MBee-868-3.0 не менее 2 шт.
2. Отладочная плата MSP-EXP430FR2355 семейства LaunchPad.
3. Плата BOOSTXL-MBEE868-1.1 производства "Системы, модули и компоненты".
4. Плата MB-Tag-1.2 ("Системы, модули и компоненты"). Вместо платы MB-Tag-1.2 может быть использовано устройство ECO-LoadControl-1.0 ("Системы, модули и компоненты").
5. Переходник USB-UART с адаптером для подключения радиомодуля. Рекомендуется использовать преобразователь MB-USBridge-1.2 ("Системы, модули и компоненты").

Все радиомодули должны быть запрограммированы актуальной версией программного обеспечения SerialStar (доступно для бесплатного скачивания на сайте www.sysmc.ru) и предварительно настроены:

Порядок загрузки ПО и настройки радиомодулей:
1. Подключить модуль к компьютеру через переходник USB-UART и определить номер COM-порта, который был присвоен переходнику при подключении. В случае необходимости, требуется установить драйверы FT232, если они не установятся автоматически.
2. С помощью программы SysmcBootLoader (доступна для бесплатного скачивания на сайте www.sysmc.ru) загрузить в модуль прошивку SerialStar.
3. Запустить любую терминальную программу с параметрами 9600 8N1.
4. Войти в командный режим передав последовательность +++ или нажав кнопку SYSTEM BUTTON на плате MB-USBridge-1.2.
Настройка модуля, подключаемого к нагрузке (здесь и далее <CR> означает нажатие кнопки "Enter"):
1. AT RE <CR>. Установить значения всех параметров "по умолчанию".
2. AT R4 17 <CR>. Вывод модуля №31 настроить в режим первого канала ШИМ.
3. AT TX 1 <CR>. Установить адрес модуля, которому будут передаваться ответные сообщения (пульту), равным 1.
4. AT MY 2 <CR>. Присвоить модулю сетевой адрес 2.
5. AT CN <CR>. Сохранить сделанные изменения, выйти из командного режима и выполнить рестарт модуля.

Подробное описание всех настраиваемых параметров находится в техническом описании программного обеспечения SerialStar.
После этого модуль необходимо вставить в плату MB-Tag-1.2 и подать на него питание.

Настройка модуля, подключаемого к пульту:
1. AT RE <CR>. Установить значения всех параметров "по умолчанию".
2. AT AP 2 <CR>. Перевести модуль в пакетный режим работы UART с поддержкой ESCAPE-символов.
3. AT CN <CR>. Сохранить сделанные изменения, выйти из командного режима и выполнить рестарт модуля.

Установить радиомодуль на плату BOOSTXL-MBEE868-1.1, которая, в свою очередь, должна быть подключена к LaunchPad. 
На плате BOOSTXL-MBEE868-1.1 должны быть установлены следующие перемычки:
1. BUZZER в положении 2-3.
2. UART SW в положении INT.
3. POT SWITCH замкнут.
4. POT ON/OFF замкнут.

Далее необходимо загрузить предпочитаемую среду разработки и запрограммировать микроконтроллер платы LaunchPad:
IAR.
Размеры выходных файлов примеров таковы, что позволяют работать с проектом даже на бесплатной версии IAR (Kickstart) с ограничением по длине кода 8 килобайт.
1. Для работы с примерами откройте файл Control.eww.

Code Composer Studio (CCS).
1. Запустите CCS.
2. Во вкладке Projects/Import CCS Projects выберите путь к каталогу cpp-mbee\examples\MSP430\CCS и импортируйте требуемые проекты с примерами в свое рабочее пространство (workspace).
3. Для корректного отображения комментариев при работе с проектом в Code Composer Studio (CCS) установите UTF-8 кодировку ("Window/Preferences/General/Workspace Text File Encoding = UTF-8).
 
Пульт дистанционно управляет одним дискретным и одним аналоговым каналом. Кроме этого он осуществляет контроль одного аналогового канала. В реальных системах в качестве объекта
управления может быть использован, например, драйвер светодиодного светильника с релейным управлением или с возможностью плавной регулировки с помощью ШИМ. К аналоговому входу
может быть подключен датчик тока драйвера. Мониторинг тока позволяет получать данные об исправности светильника и о величине потребляемой им энергии.
Первый контакт DIP-переключателя управляет режимом адресации пульта. Если переключатель находится в положении OFF, команды отправляются в широковещательном режиме и будут исполняться
всеми радиомодулями, имеющими совпадающие сетевые и радиочастотные настройки. В широковещательном режиме контроль доставки команд не осуществляется.
Если установить первый контакт DIP-переключателя в положение ON, то пульт переходит в режим адресного управления. Все команды будут отправляться модулю с сетевым адресом, определяемом
константой TARGET_ADDRESS в файле Control.h. При этом осуществляется контроль получения команды удаленным радиомодулем. Если какая-либо команда им не получена, то пульт выдает
предупреждение - три коротких звуковых сигнала и/или (зависит от положения перемычки BUZZER) трех включений красного светодиода.  
При нажатии на кнопку BUTTON1 на плате BOOSTXL-MBEE868-1.1, пульт отправляет команду включения или выключения цифрового выхода на удаленном модуле. Если модуль, установленный на
плате MB-Tag-1.2 получит команду включения, на ней должен загореться светодиод, подключенный к выходу DO3. 
Управление ШИМ-выходом осуществляется с помощью потенциометра пульта. Если при вращении ручки потенциометра его сопротивление изменится более, чем на заданную величину,то
пульт отправит на удаленный модуль команду установки нового значения рабочего цикла ШИМ. Чувствительность потенциометра определяется параметром POTENTIOMETER_SENSITIVITY в файле
Control.h. На плате MB-Tag-1.2 это должно приводить к изменению яркости светодиода на выходе DO2.
Для контроля аналогового канала на удаленном модуле, пульт периодически передает команду запроса состояния линий ввода/вывода. Интервал задается параметром 
REMOTE_MODULE_POLL_PERIOD в файле Control.h. Прием ответа на команду подтверждается кратковременным включением зеленого светодиода.
Если измеренное значение напряжения на аналоговом входе AI1 на плате MB-Tag-1.2 превышает порог, определяемый константой CURRENT_MAX, то на пульте включается постоянный звуковой сигнал
и загорается красный светодиод. Для проверки контроля напряжения на аналоговом входе его можно подключить с помощью перемычки к выходу DO2. ВНИМАНИЕ! Поскольку на выходе DO2 формируется ШИМ-сигнал, 
то измеренное значение напряжения будет зависеть от момента проведения измерения, что может приводить к "ложным" превышениям порога CURRENT_MAX даже при низких средних уровнях напряжения. 
Для исключения этого можно увеличить емкость конденсатора, подключенного ко входу AI1 на плате MBee-Tag-1.2.Если проект компилируется с опцией ENABLE_CONSOLE, то второй модуль eUSCI, имеющийся
в микроконтроллере MSP430 используется для выдачи диагностических сообщений, а также как альтернативный управляющий интерфейс. Настройки параметров консоли осуществляются в файле Control.h. 
По умолчанию консоль работает с параметрами 115200 8N1.Управление осуществляется с помощью любой терминальной программы.
Команды консоли:
1. "1" - включение дискретного выхода на удаленном модуле.
2. "2" - выключение дискретного выхода.
3. "+" - увеличение рабочего цикла ШИМ на удаленном модуле на одну ступень. Число ступеней определяется параметром BRIGTHNESS_NUMBER_OF_STEPS в файле Control.h.
4. "-" - уменьшение рабочего чикла на 1 ступень.

